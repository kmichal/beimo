<% layout('layout') -%>

<% if (camcount > 4) { %>
	<% var widthClass = 'panel-quarter' %>
<% } else { %>
	<% var widthClass = 'panel-half' %>
<% } %>


<div class="row">
	<% cameras.forEach(function(camera, index) { %>
		<div class="col-xs-12 col-md-6 col-lg-4">
			<div class="panel panel-default">
			  <div class="panel-heading"><%= camera.nickname %></div>
			  <div class="panel-body">
			    <img id="<%= camera._id %>" role="camera_image" style="max-width:100%; max-height:100%;" src="/live/img/<%= camera._id%>"/>	    
			  </div>
			</div>
		</div>
	<% }) %>	
</div>



<script type="text/javascript">

	liveupdate = true;

	function updateLiveImage(cams)
	{
		cams.empty();
		cams.attr('src', '/live/img/' + cams.attr('id'));
	}

	$(function() {

		camImages = $('img[role="camera_image"]');


		setInterval(function() {
			updateLiveImage(camImages);
		}, 100);

	});
</script>